<!DOCTYPE html PUBLIC "-//IETF//DTD HTML//EN">
<!-- saved from url=(0085)https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><!-- is_embed=False -->
<script>
  const observer = new PerformanceObserver((list) => {
    list.getEntries().forEach((entry) => {
      console.log('%o', entry);
    })
  });
  observer.observe({type: "navigation", buffered: true});
</script>
<script src="./Psion Organiser II LZ_LZ64 Programming Manual_ Chapter 1-2_files/athena.js" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app222.us.archive.org';v.server_ms=212;archive_analytics.send_pageview({});});</script>
<script type="text/javascript" src="./Psion Organiser II LZ_LZ64 Programming Manual_ Chapter 1-2_files/bundle-playback.js" charset="utf-8"></script>
<script type="text/javascript" src="./Psion Organiser II LZ_LZ64 Programming Manual_ Chapter 1-2_files/wombat.js" charset="utf-8"></script>
<script>window.RufflePlayer=window.RufflePlayer||{};window.RufflePlayer.config={"autoplay":"on","unmuteOverlay":"hidden"};</script>
<script type="text/javascript" src="./Psion Organiser II LZ_LZ64 Programming Manual_ Chapter 1-2_files/ruffle.js"></script>
<script type="text/javascript">
    __wm.init("https://web.archive.org/web");
  __wm.wombat("http://members.surfeu.at:80/org2/manlzpg1.htm","20071228050649","https://web.archive.org/","web","/_static/",
	      "1198818409");
</script>
<link rel="stylesheet" type="text/css" href="./Psion Organiser II LZ_LZ64 Programming Manual_ Chapter 1-2_files/banner-styles.css">
<link rel="stylesheet" type="text/css" href="./Psion Organiser II LZ_LZ64 Programming Manual_ Chapter 1-2_files/iconochive.css">
<!-- End Wayback Rewrite JS Include -->


<title>Psion Organiser II LZ/LZ64 Programming Manual: Chapter 1-2</title>
</head>

<body bgcolor="#FFFFFF"><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script>__wm.rw(0);</script>
<div id="wm-ipp-base" lang="en" style="display: block; direction: ltr;"><template shadowrootmode="closed"><div id="wm-ipp" style="position:fixed;left:0;top:0;right:0;">
<div id="donato" style="position:relative;width:100%;">
  <div id="donato-base">
    <iframe id="donato-if" src="https://archive.org/includes/donate.php?as_page=1&amp;platform=wb&amp;referer=https%3A//web.archive.org/web/20071228050649/http%3A//members.surfeu.at/org2/manlzpg1.htm" scrolling="no" frameborder="0" style="width:100%; height:100%">
    </iframe>
  </div>
</div><div id="wm-ipp-inside">
  <div id="wm-toolbar" style="position:relative;display:flex;flex-flow:row nowrap;justify-content:space-between;">
    <div id="wm-logo" style="/*width:110px;*/padding-top:12px;">
      <a href="https://web.archive.org/web/" title="Wayback Machine home page"><img src="https://web.archive.org/_static/images/toolbar/wayback-toolbar-logo-200.png" srcset="/_static/images/toolbar/wayback-toolbar-logo-100.png, /_static/images/toolbar/wayback-toolbar-logo-150.png 1.5x, /_static/images/toolbar/wayback-toolbar-logo-200.png 2x" alt="Wayback Machine" style="width:100px" border="0"></a>
    </div>
    <div class="c" style="display:flex;flex-flow:column nowrap;justify-content:space-between;flex:1;">
      <form class="u" style="display:flex;flex-direction:row;flex-wrap:nowrap;" target="_top" method="get" action="https://web.archive.org/web/submit" name="wmtb" id="wmtb"><input type="text" name="url" id="wmtbURL" value="http://members.surfeu.at/org2/manlzpg1.htm" onfocus="this.focus();this.select();" style="flex:1;" autocomplete="off"><input type="hidden" name="type" value="replay"><input type="hidden" name="date" value="20071228050649"><input type="submit" value="Go">
      </form>
      <div style="display:flex;flex-flow:row nowrap;align-items:flex-end;">
                <div class="s" id="wm-nav-captures" style="flex:1;"><a class="t" href="https://web.archive.org/web/*/http://members.surfeu.at/org2/manlzpg1.htm" title="See a list of every capture for this URL">31 captures</a><div class="r" title="Timespan for captures of this URL">16 Apr 2002 - 22 Feb 2008</div></div>
        <div class="k">
          <a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm" id="wm-graph-anchor">
            <div id="wm-ipp-sparkline" title="Explore captures for this URL" style="position: relative">
              <canvas id="wm-sparkline-canvas" width="725" height="27" border="0"></canvas>
            <div class="yt" style="display: none; width: 25px; height: 27px;"></div><div class="mt" style="display: none; width: 2px; height: 27px;"></div></div>
          </a>
        </div>
      </div>
    </div>
    <div class="n">
      <table>
        <tbody>
          <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
          <tr class="m">
            <td class="b" nowrap="nowrap"><a href="https://web.archive.org/web/20071127141208/http://members.surfeu.at:80/org2/manlzpg1.htm" title="27 Nov 2007"><strong>Nov</strong></a></td>
            <td class="c" id="displayMonthEl" title="You are here: 05:06:49 Dec 28, 2007">DEC</td>
            <td class="f" nowrap="nowrap"><a href="https://web.archive.org/web/20080222234215/http://members.surfeu.at:80/org2/manlzpg1.htm" title="22 Feb 2008"><strong>Feb</strong></a></td>
          </tr>
          <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
          <tr class="d">
            <td class="b" nowrap="nowrap"><a href="https://web.archive.org/web/20071127141208/http://members.surfeu.at:80/org2/manlzpg1.htm" title="14:12:08 Nov 27, 2007"><img src="https://web.archive.org/_static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0"></a></td>
            <td class="c" id="displayDayEl" style="width:34px;font-size:22px;white-space:nowrap;" title="You are here: 05:06:49 Dec 28, 2007">28</td>
            <td class="f" nowrap="nowrap"><a href="https://web.archive.org/web/20080112151746/http://members.surfeu.at:80/org2/manlzpg1.htm#1-1a" title="15:17:46 Jan 12, 2008"><img src="https://web.archive.org/_static/images/toolbar/wm_tb_nxt_on.png" alt="Next capture" width="14" height="16" border="0"></a></td>
          </tr>
          <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
          <tr class="y">
            <td class="b" nowrap="nowrap"><a href="https://web.archive.org/web/20061116065520/http://members.surfeu.at:80/org2/manlzpg1.htm" title="16 Nov 2006"><strong>2006</strong></a></td>
            <td class="c" id="displayYearEl" title="You are here: 05:06:49 Dec 28, 2007">2007</td>
            <td class="f" nowrap="nowrap">2008</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="r" style="display:flex;flex-flow:column nowrap;align-items:flex-end;justify-content:space-between;">
      <div id="wm-btns" style="text-align:right;height:23px;">
                <span class="xxs">
          <div id="wm-save-snapshot-success">success</div>
          <div id="wm-save-snapshot-fail">fail</div>
          <a id="wm-save-snapshot-open" href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#" title="Share via My Web Archive" style="display: inline-block;">
            <span class="iconochive-web"></span>
          </a>
          <a href="https://archive.org/account/login.php" title="Sign In" id="wm-sign-in" style="display: none;">
            <span class="iconochive-person"></span>
          </a>
          <span id="wm-save-snapshot-in-progress" class="iconochive-web"></span>
        </span>
                <a class="xxs" href="http://faq.web.archive.org/" title="Get some help using the Wayback Machine" style="top:-6px;"><span class="iconochive-question" style="color:rgb(87,186,244);font-size:160%;"></span></a>
        <a id="wm-tb-close" href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#close" style="top:-2px;" title="Close the toolbar"><span class="iconochive-remove-circle" style="color:#888888;font-size:240%;"></span></a>
      </div>
      <div id="wm-share" class="xxs">
        <a href="https://web.archive.org/web/20071228050649/http://web.archive.org/screenshot/http://members.surfeu.at/org2/manlzpg1.htm" id="wm-screenshot" title="screenshot" style="visibility: hidden;">
          <span class="wm-icon-screen-shot"></span>
        </a>
        <a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#" id="wm-video" title="video">
          <span class="iconochive-movies"></span>
        </a>
        <a id="wm-share-facebook" href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#" data-url="https://web.archive.org/web/20071228050649/http://members.surfeu.at:80/org2/manlzpg1.htm" title="Share on Facebook" style="margin-right:5px;" target="_blank"><span class="iconochive-facebook" style="color:#3b5998;font-size:160%;"></span></a>
        <a id="wm-share-twitter" href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#" data-url="https://web.archive.org/web/20071228050649/http://members.surfeu.at:80/org2/manlzpg1.htm" title="Share on Twitter" style="margin-right:5px;" target="_blank"><span class="iconochive-twitter" style="color:#1dcaff;font-size:160%;"></span></a>
      </div>
      <div style="padding-right:2px;text-align:right;white-space:nowrap;">
        <a id="wm-expand" class="wm-btn wm-closed" href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#expand"><span id="wm-expand-icon" class="iconochive-down-solid"></span> <span class="xxs" style="font-size:80%;">About this capture</span></a>
      </div>
    </div>
  </div>
    <div id="wm-capinfo" style="border-top:1px solid #777;display:none; overflow: hidden">
        <div id="wm-capinfo-notice" source="api"></div>
                <div id="wm-capinfo-collected-by">
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center">COLLECTED BY</div>
    <div style="padding:3px;position:relative" id="wm-collected-by-content">
      <div style="display:inline-block;vertical-align:top;width:49%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/web)"></span>
		<div>Collection: <a style="color:#33f;" href="https://archive.org/details/web" target="_new"><span class="wm-title">web</span></a></div>
	      </div>
    </div>
    </div>
    <div id="wm-capinfo-timestamps">
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center" title="Timestamps for the elements of this page">TIMESTAMPS</div>
    <div>
      <div id="wm-capresources" style="margin:0 5px 5px 5px;max-height:250px;overflow-y:scroll !important"></div>
      <div id="wm-capresources-loading" style="text-align:left;margin:0 20px 5px 5px;display:none"><img src="https://web.archive.org/_static/images/loading.gif" alt="loading"></div>
    </div>
    </div>
  </div></div></div><link rel="stylesheet" type="text/css" href="./Psion Organiser II LZ_LZ64 Programming Manual_ Chapter 1-2_files/banner-styles.css"><link rel="stylesheet" type="text/css" href="./Psion Organiser II LZ_LZ64 Programming Manual_ Chapter 1-2_files/iconochive.css"><div class="wb-autocomplete-suggestions "></div></template>
</div><div id="wm-ipp-print">The Wayback Machine - https://web.archive.org/web/20071228050649/http://members.surfeu.at:80/org2/manlzpg1.htm</div>
<script type="text/javascript">//<![CDATA[
__wm.bt(725,27,25,2,"web","http://members.surfeu.at/org2/manlzpg1.htm","20071228050649",1996,"/_static/",["/_static/css/banner-styles.css?v=S1zqJCYt","/_static/css/iconochive.css?v=3PDvdIFv"], false);
  __wm.rw(1);
//]]></script>
<!-- END WAYBACK TOOLBAR INSERT -->
 

<table border="0" cellpadding="0" cellspacing="0" width="100%">
  <tbody><tr>
    <td align="center" bgcolor="#FFFF00"><img src="./Psion Organiser II LZ_LZ64 Programming Manual_ Chapter 1-2_files/psion_logo.gif" alt="Psion Homepage Logo." width="602" height="134"></td>
  </tr>
</tbody></table>

<font face="Arial" size="2">

<p align="center"><font size="6"><em><strong>LZ/LZ64 Programming Manual</strong></em></font></p>

<p align="center"><img src="./Psion Organiser II LZ_LZ64 Programming Manual_ Chapter 1-2_files/psibar.gif" width="312" height="24" alt="Psion bar."></p>

<p align="left"><font size="5"><b>Contents</b></font>

</p><p> <a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#1-1a"><b>1 Introduction to OPL</b></a><br>
  &nbsp;&nbsp;&nbsp;<a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#1-2a">The Prog menu</a><br>
  &nbsp;&nbsp;&nbsp;<a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#1-2b">Creating, saving and running a procedure</a><br>
  &nbsp;&nbsp;&nbsp;<a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#1-9a">Edit. Print, Dir. Copy, Delete</a><br>
  <a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#2-1a"><b>2 Procedures and variables</b></a><br>
  <a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#3-1"><b>3 Loops and branches</b></a><br>
  <a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#4-1"><b>4 Operators</b></a><br>
  <a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#5-1"><b>5 Handling data files</b></a><br>
  <a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#6-1"><b>6 Handling any type of file</b></a><br>
  <a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#7-1"><b>7 Error handling</b></a><br>
  &nbsp;&nbsp;&nbsp;<a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#7-1">Common errors</a><br>
  &nbsp;&nbsp;&nbsp;<a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#7-4">Run-time errors</a><br>
  &nbsp;&nbsp;&nbsp;<a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#7-4">Error trapping</a><br>
  <a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#8-1"><b>8 Example programs</b></a><br>
  <a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#9-1"><b>9 OPL commands and functions</b></a><br>
  &nbsp;&nbsp;&nbsp;<a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#9-1">Summary</a><br>
  &nbsp;&nbsp;&nbsp;<a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#9-6">Command syntax</a><br>
  &nbsp;&nbsp;&nbsp;<a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#9-7">Function syntax</a><br>
  &nbsp;&nbsp;&nbsp;<a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#9-8">List of commands and functions</a> 
</p><p><b>Appendices</b><br>
  <a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#A-1a"><b>A Organiser character set</b></a><br>
  &nbsp;&nbsp;&nbsp;<a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#A-1b">Printing non-keyboard characters</a><br>
  &nbsp;&nbsp;&nbsp;<a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#A-4a">Codes for special keys</a><br>
  &nbsp;&nbsp;&nbsp;<a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#A-5">Control characters</a><br>
  &nbsp;&nbsp;&nbsp;<a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#A-6">User-defined characters</a><br>
  <a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#B-1"><b>B Technical Data</b></a><br>
  <a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#C-1"><b>C Technical programming</b></a><br>
  &nbsp;&nbsp;&nbsp;<a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#C-1">Memory addresses</a><br>
  <a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg1.htm#D-1"><b>D Error messages</b></a><br>


</p><p align="center"><img src="./Psion Organiser II LZ_LZ64 Programming Manual_ Chapter 1-2_files/orgbar.gif" width="312" height="24" alt="Organiser bar."></p>

<a name="1-1a"></a><p><font size="5"><b>1 Introduction to OPL</b></font>

</p><p>OPL is the Organiser Programming Language. It has a set of
commands and functions suitable for all kinds of applications -
including the manipulation of records in data files.

</p><p>To enter OPL:
</p><ul><li type="square"> Select Prog from the main menu, by pressing P.</li></ul>

<p>From the Prog menu you can start new programs or continue
with old ones.

</p><p>Once you have written programs in OPL, you can run them from
within Prog or directly from the main menu, or even whilst you are
working on the calculator or the Pocket Spreadsheet.

</p><p>An OPL program consists of one or more <b>procedures</b> each of which
is typed in separately. A simple program may consist of just one
and a more complex program of a main procedure which calls others.

</p><p>The most efficient way to use OPL is to write short procedures
which can be tested individually. Each one should ideally perform
just one specific task. That way, programs which have similar
requirements can share one common procedure to do the same job.

</p><p><b>This chapter shows you how to write. save and run a simple
procedure and covers all the options on the Prog menu.</b>


<a name="1-2a"></a></p><p><font size="4"><b>The Prog menu</b></font>

</p><p>The Prog menu looks like this:
<table><tbody><tr><td bgcolor="silver"><font face="Courier">
<u>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11:32a</u><br>
Edit&nbsp;&nbsp;&nbsp;New&nbsp;&nbsp;&nbsp;&nbsp;Run<br>
Print&nbsp;&nbsp;Dir&nbsp;&nbsp;&nbsp;&nbsp;Copy<br>
Delete</font></td></tr></tbody></table>

</p><p>The options on the Prog menu are:

<table>
<tbody><tr><td><font face="arial" size="2"><b>Edit</b></font></td>
    <td><font face="arial" size="2">Lets you alter an existing procedure.</font></td></tr>
<tr><td><font face="arial" size="2"><b>New</b></font></td>
    <td><font face="arial" size="2">Lets you type in and save a new procedure.</font></td></tr>
<tr><td><font face="arial" size="2"><b>Run</b></font></td>
    <td><font face="arial" size="2">Executes an existing procedure.</font></td></tr>
<tr><td><font face="arial" size="2"><b>Print</b></font></td>
    <td><font face="arial" size="2">Prints out a procedure on an attached printer or computer.</font></td></tr>
<tr><td><font face="arial" size="2"><b>Dir</b></font></td>
    <td><font face="arial" size="2">Provides a directory list of your procedures.</font></td></tr>
<tr><td><font face="arial" size="2"><b>Copy</b></font></td>
    <td><font face="arial" size="2">Copies procedures to another device.</font></td></tr>
<tr><td><font face="arial" size="2"><b>Delete</b></font></td>
    <td><font face="arial" size="2">Deletes procedures.</font></td></tr>
</tbody></table>


<a name="1-2b"></a></p><p><font size="4"><b>Creating, saving and running a procedure</b></font>

</p><p>The simple procedure below just clears the screen and
displays the date until you press a key. The procedure's
name is DATE:

</p><p><font face="Courier">
DATE:<br>
CLS<br>
PRINT "TODAY IS",DAY;"/";MONTH<br>
GET
</font>


<a name="1-3a"></a></p><p><font size="3"><b>1 Creating a new procedure</b></font>

</p><ul><li>Select <b>New</b> from the menu and the screen shows:</li>
<table><tbody><tr><td bgcolor="silver"><font face="Courier">
New A:_
</font></td></tr></tbody></table>
</ul>

<p>The current device is shown after the word New; in this
case it is A: (the internal memory). If you want to work
on a pack, press <b>MODE</b> to change device.

</p><p>The first thing to type is the procedure name, this can
be up to 8 characters long and must start with a letter.
</p><ul><li type="square"> Type in DATE as the name for your first
      procedure. <b>(Don't type the colon.)</b> Press <b>EXE</b>.</li></ul>

<p>The procedure name is shown with a colon at the end. The
cursor is flashing at the end of it.
<table><tbody><tr><td bgcolor="silver"><font face="Courier">
DATE:_
</font></td></tr></tbody></table>

</p><ul><li type="square"> Press <b>EXE</b> to move the cursor down to the next line and
      you can begin typing. Typing in the OPL editor is the
      the same as typing in the notepad.</li></ul>

<p>If you are not used to the keys look at the Keyboard section
in Chapter 2 of the operating manual.

</p><p><b>Note: in OPL you can use either upper case or lower case
letters in any combination.</b>
<a name="1-3b"></a></p><ul><li type="square"> Type the first line:<br>
<font face="Courier">CLS</font></li>
    <li type="square"> This is a <b>command</b>. When you run the procedure, CLS is an
      instruction to OPL to clear the screen.</li>
    <li type="square"> Press <b>EXE</b> to start a new line, then type:<br>
          <font face="Courier">PRINT "TODAY IS",DAY;"/";MONTH</font></li>
</ul>

<p>Check that the line appear on screen exactly as it does here as
even the spaces are important. Here is an analysis of the line:

</p><ul><a name="1-4a"></a><li>PRINT, is a <b>command</b>. It makes what. follows it print
        on the display screen. All commands are followed by
        a space.</li>
    <a name="1-4b"></a><li>"TODAY IS" is the text to be printed. A piece of text in
        quotes like this is called a <b>string</b>.</li>
    <a name="1-4c"></a><li>A <b>comma</b> makes the next thing to be printed follow on the
        same line after a space.</li>
    <a name="1-4d"></a><li>DAY is a <b>function</b>. It finds out the date. Here it returns it
        to the print command, which displays it.</li>
    <a name="1-4e"></a><li>A <b>semi-colon</b> makes the next thing to be printed follow on
        the same line without a space.</li>
    <li>"/" is another string of just one character and MONTH is
        another function.</li>
    <a name="1-4g"></a><li type="square">Now press <b>EXE</b> to start a new line, and type:</li>
          <font face="Courier">GET</font>
</ul>

<p>The GET function, waits for a keypress before running the rest
of the program. So when you run DATE:, the date will remain
on the screen until you press a key.


<a name="1-5a"></a></p><p><font size="3"><b>Editing what you've typed</b></font>

</p><p>You can correct what you've typed at any time:
</p><ul>
    <li>Use <b>LEFT</b> , <b>RIGHT</b>, <b>UP</b> and <b>DOWN</b> to move around.</li>
    <li>Use <b>DEL</b> to delete the character to the left of the character and
      hold down <b>SHIFT</b> and press <b>DEL</b> to delete the character under
      the cursor.</li>
    <li>To insert a new line between two existing ones, press <b>EXE</b> on
      the first character of the second one.</li>
    <li>To join two lines, press <b>DEL</b> on the first character of the
      second one.</li>
    <li>To delete a line, press <b>ON/CLEAR</b>.</li></ul>

<a name="1-5b"></a><p>You can also press <b>MODE</b> and use four of the options on the editor menu
to help you:

<table>
<tbody><tr><td><font face="Arial" size="2"><b>Find</b></font></td>
    <td><font face="Arial" size="2">Takes you to a search-clue you specify (you
    have to press <b>ON/CLEAR</b> to remove the find prompt).</font></td></tr>
<tr><td><font face="Arial" size="2"><b>Home</b></font></td>
    <td><font face="Arial" size="2">Takes you to the top of the procedure file.</font></td></tr>
<tr><td><font face="Arial" size="2"><b>End</b></font></td>
    <td><font face="Arial" size="2">Takes you to the bottom of the procedure file.</font></td></tr>
<tr><td><font face="Arial" size="2"><b>Zap</b></font></td>
    <td><font face="Arial" size="2">Clears all the lines deleting the whole
    procedure text so that you can start again.</font></td></tr>
</tbody></table>

<a name="1-6a"></a></p><p><font size="3"><b>2 Saving and translating procedures</b></font>

</p><p>When you have finished typing the procedure, you can:
</p><ul>
    <li>Translate it into a form which OPL can run.</li>
    <li>Save it as it is - so you can edit it but not run it.</li>
    <li>Quit and abandon it.</li>
    <li type="square"> Press <b>MODE</b> to get the editor menu. The first three options are:
          <font face="Courier">Tran Save Quit</font></li></ul>

<p>This diagram illustrates the differences between them.
The bold path shows the normal process of translating a new procedure:

</p><pre>           Type in procedure
           then press <b>MODE</b>

     Tran        Save        Quit

    Saves        Saves      Returns
  translated     text       to Prog
  version       version       menu</pre>

<p>You would normally select Tran, so that you can run the procedure, but
to see what the other two do:


<a name="1-6b"></a></p><p><font size="3"><b>Quit</b></font>
</p><ul><li type="square">Select Quit and you are prompted with the message: <font face="Courier">Quit? Y/N</font></li>
    <li type="square">Press <b>N</b>, and you return to the procedure editor. (If you
      pressed <b>Y</b>, everything you typed during the editing session would
      be discarded.)</li></ul>


<a name="1-7a"></a><p><font size="3"><b>Tran</b></font>
</p><ul><li type="square"> Select Tran.</li></ul>

<p>The procedure is translated into a form that OPL can run. When
the procedure has been translated, the screen displays this
prompt: <font face="Courier">Save A:DATE</font>

</p><p>You can now save the translated procedure.
</p><ul><li type="square"> Press <b>MODE</b> to change device if you want to save on a pack, then
      <b>EXE</b> to save.</li></ul>

<p>You return to the Prog menu. When you save the translated version, the
original text version is saved with it. So you can run it and re-edit
it later.


</p><p><b>Syntax errors</b>

</p><p>If you make a typing error, OPL spots it during translation. For
example, if you typed PRONT instead of PRINT or omitted one of
the pair of quotation round a string, this message is displayed:

<table><tbody><tr><td bgcolor="silver"><font face="Courier">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ERROR<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SYNTAX ERR<br>
....................<br>
&nbsp;&nbsp;press SPACE key
</font></td></tr></tbody></table>

</p><ul><li type="square"> Press <b>SPACE</b> and you return to the procedure editor, with the
      cursor near the syntax error.</li>
    <li type="square"> Correct it, press <b>MODE</b>, and select Tran again.</li></ul>


<a name="1-7b"></a><p><font size="3"><b>Save</b></font>

</p><p>When you just save a procedure rather than translating it, no error
checking is done. The text is simply saved exactly as you typed it.

</p><p>If you type in part of a procedure and intend to return to it later to
complete it you can select Save instead of Tran so as not to waste
memory by producing an unnecessary translated version.


</p><p><b>Where you should save programs</b>

</p><p>The best place to save programs is on A: or a Rampak. Then, if a
procedure takes a couple of versions before it runs properly, each
version will not use up space:
</p><ul><li>When an edited version is saved on A: or a Rampak, the old
      version is deleted completely each time the new version is saved
      or translated.</li>
    <li>On Datapaks, however, the old versions remain there taking up
      space, you just can't access them.</li></ul>

<p>When a final version of a procedure has been produced on device A: it
is a good idea to copy it to a Datapak.


<a name="1-8b"></a></p><p><font size="3"><b>3 Running a procedure</b></font>

</p><p>When you've successfully translated the procedure, you can run it.
</p><ul><li type="square">From the Prog menu, select Run. The name of the procedure you just
      translated is supplied for you:</li>
<table><tbody><tr><td bgcolor="silver"><font face="Courier">
Run A:Date
</font></td></tr></tbody></table>
    <li type="square">Just press <b>EXE</b> to run the procedure.</li></ul>

<p>When DATE: is run, the screen will first clear and then show something
like this, depending on the date:
<table><tbody><tr><td bgcolor="silver"><font face="Courier">
TODAY IS 19/8
</font></td></tr></tbody></table>

</p><p>The last line of the procedure was GET. This instruction simply
waits until you press a key before continuing. So, when you press
a key, the procedure finishes and you return to the Prog menu.


<a name="1-9a"></a></p><p><font size="4"><b>Edit, Print, Dir, Copy, Delete</b></font>

</p><p>Like Run, the remaining Prog options all require you to specify an
existing procedure file.

</p><p>If you haven't left Prog, the name of the procedure you worked on
last is supplied for Edit and Print. You can press <b>EXE</b> to accept it,
or <b>DOWN</b> to get a list of procedures to select from. For detail on selecting
from file lists, see Chapter 12 in the operating manual.


<a name="1-9b"></a></p><p><font size="3"><b>Editing an existing procedure</b></font>

</p><p>The Edit option from the Prog menu allows you to return to an
old procedure to change it or add to it.
</p><ul><li type="square"> Select Edit and press <b>MODE</b> to change device if necessary, then
      select a procedure file.</li></ul>

<p>When you've finished editing the procedure, you can either:
</p><ul><li>Press <b>MODE</b> then <b>EXE</b> to translate and save it.</li></ul>
or, if you make a mess of the editing:
<ul><li>Press <b>MODE</b> then 9 to quit and delete this version of the
      procedure so you can edit the original again.</li></ul>


<a name="1-9c"></a><p><font size="3"><b>Printing a procedure</b></font>

</p><p>The Print option is used to print out a listing of a procedure
on a printer or personal computer.
</p><ul><li type="square"> Select Print then select a procedure file.</li></ul>

<p>If no printer or computer is connected to the Organiser, this
error message is displayed:
<table><tbody><tr><td bgcolor="silver"><font face="Courier">
&nbsp;&nbsp;&nbsp;DEVICE MISSING&nbsp;&nbsp;&nbsp;
</font></td></tr></tbody></table>

</p><p>For more details on printing, see Chapter 17 in the operating
manual.


<a name="1-10a"></a></p><p><font size="3"><b>The procedure directory</b></font>

</p><p>The Dir option on the Prog menu shows you the directory of
procedures stored on the various devices.
</p><ul><li type="square"> Select Dir from the Prog menu. The screen shows:</li>
<table><tbody><tr><td bgcolor="silver"><font face="Courier">
Dir A:
</font></td></tr></tbody></table>
</ul>

<p>If necessary, change device with <b>MODE</b>, then list the procedures
with <b>DOWN</b> in the same way as you do in Dir in Utils. See Chapter 15 of
the Operating Manual.


<a name="1-10b"></a></p><p><font size="3"><b>Copying a procedure</b></font>

</p><p>The Copy option in the Prog menu is used to make copies of
procedures from one device to another. 
</p><ul><li type="square"> Select Copy from the Prog menu:</li>
<table><tbody><tr><td bgcolor="silver"><font face="Courier">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Copy<br>
&nbsp;&nbsp;&nbsp;&nbsp;Select type<br>
....................<br>
<u>O</u>pl Oplobj Opltxt
</font></td></tr></tbody></table>
</ul>

<p><b>Opl</b> Copies both the text and translated object code of the procedure.
<br><b>Oplobj</b> Copies only the translated object code part.
<br><b>Opltxt</b> Copies only the editable text part.
</p><ul><li>If you select Opl you will be able to edit and run the copy.</li>
    <li>If you select Oplobj you won't be able to edit it.</li>
    <li>If you select Opltxt, you won't be able to run it until you
      have translated it again.</li></ul>

<p>Copy in Prog works just like Copy in Utils.

</p><p><b>Warning:</b> If you copy a procedure, and one with the same name already
exists on the destination device, the existing one is deleted - even
if the existing one is text only and the one you are copying is
object only.


<a name="1-11a"></a></p><p><font size="3"><b>Deleting a procedure</b></font>

</p><p>The <b>Delete</b> option allows you to delete procedures from any of the devices.
</p><ul><li type="square"> Select Delete to get the prompt: <font face="courier">Delete A:_</font></li></ul>

<p>If necessary change device with <b>MODE</b>. Select a file or files to be
deleted in the same way as you do in the Utils Delete option.

<a name="1-11b"></a></p><p><font size="3"><b>Running a procedure from the main menu</b></font>

</p><p>To insert the name of a procedure in the main menu:
</p><ul><li type="square"> On the main menu, press <b>MODE</b> with the cursor where you
      want the name to be.</li>
    <li type="square"> Type in the name of the procedure.</li>
    <li type="square"> Select Opl.</li></ul>

<p>When you select the name, the procedure is run.

</p><p>For example, you could type in, translate and save a procedure like
the one below, then enter its name, ID, in the main menu. When the
item Id is selected, your Organiser will be identified.
<font face="Courier">
</font></p><p><font face="Courier">ID:
<br>CLS
<br>PRINT "IF FOUND PLEASE RING"
<br>PRINT "PAUL SMITH EXT. 998"
<br>GET</font>

<a name="1-12a"></a></p><p><font size="3"><b>Pausing and quitting procedures when running</b></font>

</p><p>Sometimes you may want to stop a procedure when it's running. To
halt the execution of a procedure:
</p><ul><li type="square"> Press <b>ON/CLEAR</b>.</li></ul>

<p>This will pause it indefinitely. (Unless the procedure was waiting
for a key, with a function such as GET.)
</p><ul><li type="square"> Press <b>Q</b> to quit (or any other key to continue).</li></ul>

<p>If the procedure was run from the main menu, the screen shows:

<table><tbody><tr><td bgcolor="silver"><font face="Courier">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ERROR<br>
ESCAPE IN A:procname<br>
....................<br>
&nbsp;&nbsp;press SPACE key
</font></td></tr></tbody></table>

</p><ul><li type="square"> Press the <b>SPACE</b> key to return to the main menu.</li></ul>

<p>If the procedure was run from the Prog menu, the screen shows:

<table><tbody><tr><td bgcolor="silver"><font face="Courier">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ERROR<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESCAPE<br>
....................<br>
Edit A:procname Y/N
</font></td></tr></tbody></table>

</p><p>Press <b>Y</b> if you want to enter the procedure text to edit it, or
press <b>N</b> to return to the Prog menu.


<a name="1-13a"></a></p><p><font size="3"><b>Renaming a procedure</b></font>

</p><p>You can't use Copy to rename a procedure you have to re-save it under
a different name. For example, to rename A:DATE to A:TODAY.
</p><ul><li type="square"> Select Edit to edit A:DATE then select Tran.</li>
    <li type="square"> When you see the Save A:DATE prompt, press <b>ON/CLEAR</b> then enter
      the new name, TODAY and press <b>EXE</b>.</li></ul>

<a name="1-13b"></a><p><font size="3"><b>Translating a procedure for an XP or CM</b></font>

</p><p>If you are creating a procedure to be run on a two-line Organiser
model CM or XP:
</p><ul><li type="square"> Select Xtran instead of Tran when you've finished editing it</li></ul>

<p>When you run a procedure created on an XP or translated with Xtran,
anything printed on the screen has a border like this round it:

<table><tbody><tr><td bgcolor="silver"><font face="Courier">
XXXXXXXXXXXXXXXXXXXX<br>
XX&nbsp;&nbsp;2-LINE PROC&nbsp;&nbsp;&nbsp;XX<br>
XX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XX<br>
XXXXXXXXXXXXXXXXXXXX
</font></td></tr></tbody></table>


</p><p><font size="4"><b>Summary</b></font>

</p><p><font size="3"><b>Entering and running a procedure.</b></font>
</p><ul type="square">
    <li> Select Prog on the main menu.</li>
    <li> Select New.</li>
    <li> Type a name. Press <b>EXE</b>.</li>
    <li> Press <b>EXE</b> again to start a new line. Type in the procedure.</li>
    <li> Press <b>MODE</b> and select Tran (Xtran to run on a two-line Organiser XP or CM).</li>
    <li> Press <b>MODE</b> if you need to change device, then <b>EXE</b> to save.</li>
    <li> Select Run to execute the procedure.</li></ul>


<p><font size="3"><b>Inserting a procedure name in the main menu</b></font>
</p><ul type="square">
    <li> On the main menu, press <b>MODE</b> with the cursor where you want the name to be.</li>
    <li> Type in the name of the procedure.</li>
    <li> Select Opl.</li></ul>

<p>When you select the name. the procedure is run.


</p><p><font size="3"><b>Escaping from a running procedure</b></font>
</p><ul type="square">
    <li> Press <b>ON/CLEAR</b>.</li>
    <li> Press <b>Q</b> to quit (or any other key to continue).</li></ul>

<p align="center"><img src="./Psion Organiser II LZ_LZ64 Programming Manual_ Chapter 1-2_files/psibar.gif" width="312" height="24" alt="Psion bar."></p>

<a name="2-1a"></a><p><font size="5"><b>2 Procedures and variables</b></font>

</p><p>The previous chapter dealt with the mechanics of using the Prog
menu. The next five chapters cover the basic concepts of OPL
programming. If you are familiar with programming languages just
skim through these chapters, or refer instead to the reference sections
which follow.

</p><p>Procedures generally consist of the four steps shown in this simplified
example:

<table>
<tbody><tr><td><font face="Arial" size="2">1 Name</font></td>
<td><font face="Courier" size="2">SINE50:</font></td></tr>
<tr><td><font face="Arial" size="2">2 Declaration of variables</font></td>
<td><font face="Courier" size="2">LOCAL x</font></td></tr>
<tr><td><font face="Arial" size="2">3 Operations upon variables</font></td>
<td><font face="Courier" size="2">x=SIN(50)</font></td></tr>
<tr><td><font face="Arial" size="2">4 Communication of variables</font></td>
<td><font face="Courier" size="2">PRINT x</font></td></tr>
</tbody></table>

</p><p>This chapter deals with these four steps.


<a name="2-1b"></a></p><p><font size="4"><b>1 Procedure names</b></font>

</p><p>e.g. <b>print:</b>, <b>shares89:</b>, <b>TAXCALC:</b>
</p><ul><li>They may be up to 8 characters long and can combine numbers
      and letters. <b>The first character must be a letter.</b></li>
    <li>They end with a colon, but it is only in certain circumstances
      that you have to type this in. For example, you don't have to
      type it in when naming a new procedure but you do when you
      call a procedure from within another one.</li>
    <li>They may be typed in upper or lower case letters.</li></ul>


<a name="2-2a"></a><p><font size="4"><b>2 Declaring variables</b></font>

</p><p>If you were adding together two numbers, in algebra you would
write 'x+y=z'.<br>
In OPL you would write z=x+y but first you would have to <b>declare</b> x,y
and z as variables in order to reserve memory space for them. You would
do this:

</p><p><b>1</b> Declare the variables in order to reserve 3 spaces in memory, calles x, y
and z.
<br><font face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCAL x,y,z</font>
<br><b>2</b> Assign values to x and y.
<br><font face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x=5<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y=2</font>
<br><b>3</b> Add x and y together and assign the result to z:
<br><font face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z=x+y</font>

</p><p><b>A variable is therefore a named region of memory</b> which at the very
beginning of your procedure you <b>declare</b>. This means that you tell the
Organiser you are going to use the variable so that it will have space
to store the number or text you later assign to it. So in the SINE50
example, the line 'LOCAL x' reserves a memory space named x in which
the value given to x in the next line can be stored.


<a name="2-2b"></a></p><p><font size="3"><b>Variable names</b></font>

</p><p>There are three kinds of variables identified when you declare them by
the format of the variable name. The three kinds are:

</p><p>Floating point variables e.g. x<br>
Integer variables e.g. x%<br>
String variables e.g. x$

</p><p>All variables may be up to 8 characters long. The first character must
be a letter. The other characters may be letters or numbers but not
symbols - except for the identifiers % and $ at the end.


<a name="2-3a"></a></p><p><font size="3"><b>Floating point variables</b></font>

</p><p>A floating point number is one which has a decimal point and then any
number of digits after that point, e.g. 13.567 or 8. or 0.05319 or 6.0

</p><p>You should declare a floating point variable when you know that
the sort of value you are likely assign to it will be a floating point
number.

</p><p><b>A floating point variable name does not have any special symbol at the end.</b>

</p><p>e.g. a, AGE, PROFIT89.

</p><p>Floating point variables are stored to an accuracy of 12 digits and must
be in the range ±9.99999999999E99 to ±1E-99 and 0.


<a name="2-3b"></a></p><p><font size="3"><b>Integer variables</b></font>

</p><p>An integer is a whole number, e.g. 6 or 13 or -3 or 11058

</p><p>You should use integer variables wherever floating point numbers are not
necessary and speed or space are important. Integer arithmetic is faster
than floating point and it occupies two bytes of memory instead of eight.

<a name="2-3c"></a></p><p><b>An integer variable name ends with a % sign.</b> (The % sign is included in
the 8 characters length.)

</p><p>e.g. a%, AGE%, PROFI89%.

</p><p>Integer variables must be in the range -32768 to +32767.


<a name="2-3d"></a></p><p><font size="3"><b>String variables</b></font>

</p><p>A <b>string</b> is a sequence of characters, alphabetic, numeric or symbolic,
which is treated literally rather than being evaluated. Examples of
strings are: "x + y =" and "01-345-2908" and "profit".

<a name="2-4a"></a></p><p><b>A string variable name ends with a $ sign.</b> (The sign is included in the 8
characters length.)

</p><p>e.g. a$, NAME$, MAN6$.

</p><p>When declaring a string variable, you must state the maximum
length of the string you expect to assign to it. So if you want to
enter names up to 15 characters long as the value of NAME$, you
have to declare NAME$(15). The number goes in brackets.

</p><p>The maximum length of a string is 255 characters.


<a name="2-4b"></a></p><p><font size="3"><b>The LOCAL and GLOBAL commands</b></font>

</p><p>You must declare your variables immediately after the procedure
name. You may list together all 3 types, in any order; they must be
separated by commas like this:

</p><p><font face="Courier">LOCAL x,y,a%,NAME$(15),YEAR3%.</font>

</p><p>To declare variables you use either the LOCAL or the GLOBAL
command like this:
<br><font face="Courier">LOCAL x,a%,list$(8)</font>
<br>or
<br><font face="Courier">GLOBAL x,a%,list$(8)</font>

</p><p>LOCAL and GLOBAL define the <b>range</b> the variables are to be active
in. The basic difference is that:
</p><ul><li>Local variables are limited to the procedure in which they are
      declared.</li>
    <li>Global variables can also be used in any procedures called by the
      procedure in which they are declared.</li></ul>


<p><font size="3"><b>Calling procedures</b></font>

</p><p>An OPL program can be made up of more than one procedure. However, you
have to type, translate and save each procedure separately.

</p><p>In the example below, the fourth line of proca: calls another procedure,
procb:. To do this, you just type the procedure name (with the colon).

<table><tbody><tr><td><pre><font face="Courier">proca:
GLOBAL a%             
a%=2
procb:
PRINT a%</font></pre></td><td><pre><font face="Courier">procb:
a%=a%+4



</font></pre></td></tr></tbody></table>
You declare a% as a global variable so that it can be used in the
second procedure. In this example the value printed out when
proca: is run is 6.

</p><p>The only danger with global variables is that you may get mistakes
occurring if you accidentally use the same variable name twice. So,
you should use the LOCAL command unless the GLOBAL one is
required.

</p><p>If OPL comes across a variable which isn't declared in that
procedure, it assumes it has been declared in a previous procedure.
OPL will then report a MISSING EXTERNAL error if it can't find
the global variable in a calling procedure.


<a name="2-5b"></a></p><p><font size="3"><b>Other variables</b></font>

</p><p><b>Calculator memories</b>

</p><p>There are ten floating point variables which are always available.
These are the calculator memories m0 to m9. You do not declare
these as variables, as they are always in existence.

</p><p>Values may be assigned to these at any time in any procedure. You
can then access them in the calculator.


<a name="2-6a"></a></p><p><b>Array variables</b>

</p><p>You may want to declare a large number of similar variables at the
beginning of a program. For this reason. OPL has <b>array variables</b>.

</p><p>The idea is simply that, instead of having to declare variables a, b, c, d
and e, you can declare variables a1 to a5 in one go like this:

<table>
<tbody><tr><td width="50%"><font size="2" fac="Arial">LOCAL a%(5)</font></td>
<td><font size="2" fac="Arial">(integer variable array)</font></td></tr>
<tr><td><font size="2" fac="Arial">LOCAL a(5)</font></td>
<td><font size="2" fac="Arial">(floating point variable array)</font></td></tr>
<tr><td><font size="2" fac="Arial">LOCAL a$(5,8)</font></td>
<td><font size="2" fac="Arial">(string variable array)</font></td></tr>
</tbody></table>

</p><p>Numeric array variables may be thought of as a list of numbers, each with
the same name, but with an index number to differentiate them.

</p><p>When the array is declared, the number in brackets is the number of
elements in it. Here is a simple example assigning values to the elements
of in integer array:

</p><p><font face="Courier">procname:
<br>GLOBAL num%(4)
<br>num%(1)=1
<br>num%(2)=3
<br>num%(3)=5
<br>num%(4)=7
<br>PRINT num%(1)+num%(2)+num%(3)+num%(4)</font>

</p><p>This example just prints the sum of the four elements of the array num%.

</p><p>With strings, you must declare the number of elements in the array
<b>and</b> the maximum length of the strings.

</p><p>For example GLOBAL ARRAY$(5,10) allocates memory space for five strings,
each up to ten characters in length, under the names ARRAY$(1) to ARRAY$(5).
As yet, each of the variables is empty (is a <b>null string</b>), but enough memory
still has to be set aside to contain all of the five strings when full.


<a name="2-7a"></a></p><p><font size="4"><b>3 Operations upon variables</b></font>

</p><p>Once you have declared your variables you can perform any number
of operations on them. This might be a combination of arithmetic
operations, or you might pass the variables to other procedures for
them to operate upon them, or use one of the OPL functions.
Whatever you do, however, you need to understand how your
variables will react according to what type they are and how you
combine them.

</p><p>For example, you cannot divide a string variable by an integer
variable. And if you mix integers and floating point variables in the
same sum one may convert the other into its own type of variable.
The following sections give details of what problems may arise and
how to avoid them.


<a name="2-7b"></a></p><p><font size="3"><b>Mixing integers and floating point variables: automatic type conversion</b></font>

</p><p>In the procedure below there is a potential mistake in the third line
after the name, where the integer variable y% is assigned a floating
point value:

</p><p><font face="Courier">procname:
<br>GLOBAL x%,y%
<br>x%=7
<br>y%=3.7+x%
<br>PRINT y%
<br>GET</font>

</p><p>OPL deals with this in the following way: instead of reporting an
error, OPL carries out an <b>automatic type conversion</b> internally on
the value assigned to the mismatched variable.

</p><p>The right hand side of y%=3.7+x% is evaluated to 10.7. However, the
fractional part of the number is dropped before the result is assigned
to the left hand side, y%. So, the PRINT statement will display the
value 10.

</p><p>Since OPL does not report this as an error, the onus is on you to
ensure that it does not happen - unless you want it to! You must
always take care when mixing variable types that the answer
produced is the one which you expect.

</p><p>In the procedure below where only floating point variables are
used, you can see that another type conversion is made, but does
not cause the value to change:

</p><p><font face="Courier">procname:
<br>GLOBAL a,b,c
<br>a=1.2
<br>b=2.7
<br>c=3
<br>PRINT a+b+c</font>

</p><p>In this procedure, the floating point variable c is given the integer
value 3. An automatic type conversion is carried out in such cases. Here
the result is converted to 3.0, so the real value of the variable remains
the same.

</p><p>If you assign a floating point number to an integer variable, then the
automatic type conversion will generate an integer rounded <b>down</b>.
So if you say a%=2.3 then the value of a% will be 2; but a%=2.9
would also give a% the value 2. And if you assign a negative
floating point number to an integer variable, then the number is still
rounded down - rather than toward zero. So if you say a%=-2.3
then a% will take the value -3. This may not be desirable..

</p><p>If you expect an expression to return a floating point number, you
must ensure that the correct types of number are used within that
expression.

<a name="2-9a"></a></p><p>It is possible to control how floating point numbers are rounded when
converted. For example, if you wanted to round floating point numbers to
the nearest half (so 2.4 would round to 2.5 and 2.2 to 2) then you might
try the following statement:<br>
<font face="Courier">r=INT(2*n+0.5)/2</font>
<br>where n is the number to be rounded.

</p><p>This would produce the wrong result, though. To see why substitute a trial
value, say 3.4, instead of n:<br>
<font face="Courier">INT(2*3.4+0.5) i.e. INT(7.3).</font>
<br>returns the integer 7. But 7/2, <b>when rounded down</b> gives the integer 3,
not 3.5.

</p><p>To obtain 3.5 you must force the division to give a floating point result.
In this case the simplest way to do this is to divide by the floating point
value of 2.0, instead of the integer 2. So the expression:<br>
<font face="Courier">r=INT(2*n+0.5)/2.0</font>
<br>will give the required result.

</p><p>There is more about integers and floating point variables in the
chapter on Operators.


<a name="2-9b"></a></p><p><font size="3"><b>Mixing strings and numbers</b></font>

</p><p>If you try to allocate a number to a string variable, an error will be
reported. There is no automatic type conversion between string and numeric
variables. However, OPL does have facilities for forcing conversion of
numbers to strings and vice versa. These are the SCI$, FIX$, GEN$, NUM$
and VAL functions.


<a name="2-10a"></a></p><p><font size="3"><b>Concatenating strings</b></font>

</p><p>Adding strings together is as easy as adding numeric variables:
</p><ul><li>If a$ is "DOWN" and b$ is "WIND", then the statement c$=a$+b$
      means c$ is "DOWNWIND".</li></ul>

<p>Alternatively, you could give c$ the same value with the
statement c$="DOWN"+"WIND".

</p><p>When concatenating strings, the result cannot be longer than the maximum
length you declared.


<a name="2-10b"></a></p><p><font size="3"><b>Slicing strings</b></font>

</p><p>You can also split strings up. This process is known as <b>string slicing</b>.

</p><p>There are three functions which allow you to do this. They are LEFT$,
RIGHT$ and MID$. These allow you to access the left, right or middle
portions of a string respectively. For example:
</p><ul><li>If a$="01-234-5782", then b$=LEFT$(a$,2) assigns the variable b$ the
      string 01.</li></ul>

<p>String slicing operations leave the original string unchanged - i.e. a$
would still have the value 01-234-5782 after b$ had gained the value 01.
The exception would be when the left hand side of the expression is the
same string as appears in the right hand side. Eg a$=LEFT$(a$,4) would
return a string containing the leftmost four characters of a$ and assign
it to a$, thus overwriting the original value.

<a name="2-10c"></a></p><p><b>Note:</b> If you need to define a string which includes the quotation mark
character (ASCII character 34) then this character must be included twice
in the string. So, if you say a$="x""y""z", then the resulting value of a$
will be x"y"z.


</p><p><font size="4"><b>4 Communication of variables</b></font>

</p><p>In the first example procedure at the beginning of this chapter, the
statement PRINT x simply takes the value found in the memory space of
variable x and prints it on the screen.

</p><p>Values can also be passed between procedures. In the example on
page 2-5 [See Calling procedures], the procedure proca: called another
procedure, procb: which returned the adjusted value of a% back to proca:.
The variable a% was declared global to allow this.

</p><p>The rest of this chapter deals with two other ways of communicating values:
entering values from the keyboard using the INPUT command, and passing
values between procedures using parameters.


<a name="2-11b"></a></p><p><font size="3"><b>The INPUT command</b></font>

</p><p>Values can be entered from the keyboard using the INPUT command, as in the
example below.

</p><p>This simple procedure just asks you to enter a number. The number you enter
is assigned to the variable x and is then printed out to the screen with
a message:

</p><p><font face="Courier">INPUT:
<br>LOCAL x
<br>CLS
<br>PRINT "ENTER NUMBER"
<br>INPUT x
<br>CLS
<br>PRINT "YOU ENTERED",x
<br>GET</font>

</p><p>For full details of the INPUT command, see Chapter 9.


<a name="2-12a"></a></p><p><font size="4"><b>Procedure parameters</b></font>

</p><p>Values can be passed between procedures using parameters. In the VAT
example below, the second procedure VAT1: is followed by a parameter
name (p).

</p><p>The last line of the first procedure PROC1: calls VAT1 with the value of x.
The value of x is copied to the parameter p. VAT1: then prints out this
value plus VAT at 15%.

<font face="Courier">
</font></p><p><font face="Courier">PROC1:
<br>LOCAL x
<br>CLS
<br>PRINT "ENTER PRICE"
<br>INPUT x
<br>VAT1:(x)

</font></p><p><font face="Courier">VAT1:(p)
<br>CLS
<br>PRINT "PRICE INCLUDING VAT = ",p*1.15
<br>GET</font>

</p><ul><li>Calling a procedure which has parameters means that your first
      procedure can use local rather than global variables which is
      sometimes neater.</li>
    <li>Parameters differ from variables in that you cannot assign values
      to them. They have an external value passed to them from the calling
      procedure and it is then illegal to assign another value by saying,
      in the above example, p=p+1.</li>
    <li>Parameter names are typed in brackets immediately after the colon of
      the procedure name. Their type is specified as with variables e.g. p
      for a floating point value, p% for an integer and p$ for a string.</li></ul>


<a name="2-13a"></a><p><font size="3"><b>Multiple parameters</b></font>

</p><p>In this similar VAT example the second procedure VAT2: has two parameters.

</p><p>The value of the price variable, x, is passed to the parameter p1 and the
rate of VAT is also a variable, r, which is passed to the parameter p2.
VAT2 then prints out the price plus VAT at the rate specified.

<font face="Courier">
</font></p><p><font face="Courier">PROC2:
<br>LOCAL x, r
<br>CLS
<br>PRINT "ENTER PRICE"
<br>INPUT x
<br>CLS
<br>PRINT "ENTER VAT RATE"
<br>INPUT r
<br>VAT2:(x,r)

</font></p><p><font face="Courier">VAT2: (p1,p2)
<br>CLS
<br>PRINT p1+p2/100*p1
<br>GET</font>

</p><ul><li>You can pass variable names, strings in quotes, or actual values to
      parameters.</li>
    <li>When you pass multiple values to multiple parameters you must make
      sure that the order of the values when the procedure is called
      corresponds to the order of parameters after the procedure name. For
      example:
      <br>Procedure call - PROC:("a string",9,3.7)
      <br>Procedure name - PROC:(p$,p%,p)</li></ul>

<a name="2-14a"></a><p><font size="3"><b>The RETURN command</b></font>

</p><p>This VAT example differs from the previous two in that control
does not end with the second procedure but returns instead to the
first.

</p><p>The RETURN command is used to return the value of X plus VAT
at r percent - to be printed out in PROC3:. VAT3: is now just
doing the calculation and not printing. This means it can be called by
other procedures which need this calculation but do not necessarily
need to print it.

<font face="Courier">
</font></p><p><font face="Courier">PROC3:
<br>LOCAL x,r
<br>CLS
<br>PRINT "ENTER PRICE"
<br>INPUT x
<br>CLS
<br>PRINT "ENTER VAT RATE"
<br>INPUT r
<br>CLS
<br>PRINT "PRICE INCLUDING VAT =",VAT3:(x,r)
<br>GET

</font></p><p><font face="Courier">VAT3:(p1,p2)
<br>RETURN p1+p2/100*p1</font>

</p><ul><li>Only one value may be returned by the RETURN command.</li>
    <a name="2-14b"></a><li>The name of a procedure which RETURNs a value must end with the
      correct identifier eg. PROC$: for one which returns a string; PROC%
      for one which returns an integer; PROC: for one which returns a
      floating point value (as in this example).</li>
    <li>The RETURN command returns to the point where the procedure was
      called.</li></ul>

</font>

<p align="center"><img src="./Psion Organiser II LZ_LZ64 Programming Manual_ Chapter 1-2_files/orgbar.gif" width="312" height="24" alt="Organiser bar."></p>

<div align="center"><center>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
  <tbody><tr>
    <td width="100%" colspan="5" align="center" height="25"><font size="2" face="Arial">These
    pages should be viewed using Netscape 4.03 or Microsoft Internet Explorer 3.02 at 800x600
    pixels.</font></td>
  </tr>
  <tr>
    <td width="50" bgcolor="#FFFF00"><img src="./Psion Organiser II LZ_LZ64 Programming Manual_ Chapter 1-2_files/arrow_l.gif" align="middle" width="50" height="33" alt="Left arrow"></td>
    <td width="33%" bgcolor="#FFFF00"><a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzop3.htm"><font face="Arial"><em><strong>LZ Oper. Manual Chpt. 12-18</strong></em></font></a></td>
        <td align="center" width="33%" bgcolor="#FFFF00"><a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/org2.htm"><font face="Arial"><em><strong>~ 
          Homepage ~</strong></em></font></a></td>
    <td align="right" width="33%" bgcolor="#FFFF00"><font face="Arial"><em><strong><a href="https://web.archive.org/web/20071228050649/http://members.surfeu.at/org2/manlzpg2.htm">LZ Prog. Manual Chpt. 3-8</a></strong></em></font></td>
    <td align="right" width="50" bgcolor="#FFFF00"><img src="./Psion Organiser II LZ_LZ64 Programming Manual_ Chapter 1-2_files/arrow_r.gif" align="absmiddle" width="50" height="33" alt="Right arrow"></td>
  </tr>
</tbody></table>
</center></div>



</body></html>